# Space Map Realism Improvement Guide
for solar-logistics

## 目的

宇宙マップを「ランダムな星空＋円軌道」から脱却し、
**物理法則・時間・制約が感じられるリアリスティックな宇宙表現**
へ改善する。

本指示書は Claude Code による実装を前提とし、
「なぜそうするか」よりも「何をどう実装するか」を重視する。

---

## 全体方針（重要）

- 見た目の派手さより **整合性と時間変化**
- 完全な天文学的正確さは不要
- 「それっぽい嘘」を **一貫したルール** で作る

---

## 1. 軌道表現の改善（最優先）

### 1.1 円軌道を廃止する

#### 改善内容
- 全惑星を **楕円軌道** に変更
- 公転速度を **非等速** にする（近日点で速く、遠日点で遅い）

#### 実装指針（簡略モデル）

```ts
type OrbitParams = {
  semiMajorAxis: number
  eccentricity: number
  orbitalPeriod: number
  phase0: number
}
```

---

### 1.2 軌道傾斜（2.5D）

- 各惑星に `inclination` を付与（1〜5度）
- Z方向オフセットとして描画

```ts
z = sin(inclination) * orbitRadius
```

---

## 2. 時間概念の導入

### 2.1 ゲーム内時刻UI

- 現在時刻表示（Epoch）
- 時間加速：x1 / x10 / x100

```ts
type GameTime = {
  epoch: Date
  timeScale: number
}
```

---

### 2.2 時刻依存要素

- 惑星位置
- 惑星間距離
- 輸送コスト

---

## 3. 背景（星空）の改善

### 3.1 星密度の勾配

- 銀河面を意識した密度分布
- 完全ランダムは禁止

---

### 3.2 レイヤー分離

| レイヤー | 特徴 |
|--------|------|
| Near stars | 少し動く |
| Far stars | 固定 |
| Nebula | 非常に薄い |

---

## 4. 惑星の天体表現

### 4.1 位相（満ち欠け）

- 恒星方向と視線方向で明暗決定

---

### 4.2 自転

```ts
rotation += deltaTime * rotationSpeed
```

---

### 4.3 大気・リング（任意）

- 少なくとも1惑星に導入

---

## 5. 物流視点の可視化

### 5.1 数値UI

- 距離（AU）
- 相対速度（km/s）
- 位相差（度）

---

### 5.2 コストヒートマップ

- 軌道上に色で表示
- 時間で変化

---

## 6. 実装優先度

1. 楕円軌道 + 非等速
2. 時刻UI
3. 軌道傾斜
4. 星空密度
5. 位相表現
6. コスト可視化

---

## ゴール

- 宇宙が「時間で動いている」と感じられる
- 円軌道に見えない
- 宇宙物流らしい意思決定が生まれる
